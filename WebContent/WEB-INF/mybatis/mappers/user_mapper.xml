<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
														"HTTP://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.codeplayground.mapper.UserMapperInterface">

	<select id="getCount"  resultType="int">
		SELECT count(*) FROM tbl_user
	</select>

	<select id="selectOne" parameterType="String" resultType="userDTO">
		SELECT * FROM tbl_user WHERE user_id=#{userId}
	</select>

	<select id="selectList" parameterType="hashmap" resultType="userDTO">
		<choose>
			<when test="frontPageNum != null and rearPageNum != null">
				SELECT * FROM (SELECT rownum as row_num ,tbl_user.* FROM
				(SELECT * FROM tbl_user ORDER BY user_regdate ASC) tbl_user )
				WHERE row_num BETWEEN #{frontPageNum} AND #{rearPageNum}
			</when>
			<otherwise>
				SELECT * FROM tbl_user
				<where>
					<if test="userGender != null">user_gender = #{userGender}</if>
					<if test="userEmail != null">AND user_email = #{userEmail}</if>
					<if test="userBirth != null">AND user_birth = #{userBirth}</if>
					<if test="userPhone != null">AND user_phone = #{userPhone}</if>
					<if test="userRegdate != null">AND user_regdate = #{userRegdate}</if>
				</where>
				ORDER BY user_regdate ASC
			</otherwise>
		</choose>
	</select>

	<insert id="insert" parameterType="userDTO">
		INSERT INTO tbl_user
		VALUES(#{userId},#{userName},#{userPw},#{userGender},#{userEmail},#{userBirth},#{userPhone},sysdate)
	</insert>

	<update id="update" parameterType="userDTO">
		UPDATE tbl_user
		<set>
			<if test="userName != null">user_name = #{userName},</if>
			<if test="userPw != null">user_pw = #{userPw},</if>
			<if test="userGender != null">user_gender = #{userGender},</if>
			<if test="userEmail != null">user_email = #{userEmail},</if>
			<if test="userBirth != null">user_birth = #{userBirth},</if>
			<if test="userPhone != null">user_phone = #{userPhone},</if>
		</set>
		WHERE user_id = #{userId}
	</update>

	<delete id="delete" parameterType="String">
		DELETE FROM tbl_user WHERE user_id = #{userId}
	</delete>

</mapper>